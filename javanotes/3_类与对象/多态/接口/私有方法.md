# Java接口中的私有方法

从Java 9开始，接口中不仅可以包含默认方法(`default`)和静态方法(`static`)，还可以包含**私有方法**(`private`)。这是对接口功能的进一步扩展。

## 私有方法的作用

私有方法主要用于：
1. **提取重复代码**：将默认方法或静态方法中的重复代码抽取出来
2. **隐藏实现细节**：只暴露必要的公共方法，隐藏内部实现逻辑
3. **提高代码复用**：在接口内部多个方法间共享代码

## 私有方法的类型

接口中可以定义两种私有方法：

### 1. 普通私有方法

- 用于在**默认方法**之间共享代码
- 使用`private`关键字修饰，没有`static`修饰符

```java
public interface MyInterface {
    default void method1() {
        commonCode();
        System.out.println("method1");
    }
    
    default void method2() {
        commonCode();
        System.out.println("method2");
    }
    
    // 私有方法
    private void commonCode() {
        System.out.println("公共代码部分");
    }
}
```

### 2. 静态私有方法

- 用于在**静态方法**之间共享代码
- 使用`private static`关键字修饰

```java
public interface MyInterface {
    static void staticMethod1() {
        staticCommonCode();
        System.out.println("staticMethod1");
    }
    
    static void staticMethod2() {
        staticCommonCode();
        System.out.println("staticMethod2");
    }
    
    // 静态私有方法
    private static void staticCommonCode() {
        System.out.println("静态公共代码部分");
    }
}
```

## 私有方法的特点

1. **访问权限**：
   - 只能被同一接口内的其他方法调用
   - 不能被实现类或其他外部类访问

2. **不能是抽象的**：
   - 私有方法必须有方法体(实现)

3. **不能覆盖**：
   - 实现类无法覆盖(重写)接口的私有方法

4. **命名规则**：
   - 遵循普通方法的命名规范
   - 通常表示它们是内部实现细节

## 实际应用示例

```java
public interface BankAccount {
    double getBalance();
    
    default void deposit(double amount) {
        validateAmount(amount);
        // 存款逻辑...
    }
    
    default void withdraw(double amount) {
        validateAmount(amount);
        // 取款逻辑...
    }
    
    // 私有方法验证金额
    private void validateAmount(double amount) {
        if (amount <= 0) {
            throw new IllegalArgumentException("金额必须大于零");
        }
    }
    
    static BankAccount createSavingsAccount() {
        return createAccount("SAVINGS");
    }
    
    static BankAccount createCheckingAccount() {
        return createAccount("CHECKING");
    }
    
    // 静态私有方法创建账户
    private static BankAccount createAccount(String type) {
        // 根据类型创建具体账户的实现
        return new BankAccountImpl(type);
    }
}
```

## 为什么需要私有方法

1. **减少代码重复**：多个默认方法或静态方法可以共享同一段代码
2. **提高可维护性**：将公共逻辑集中在一处，便于修改
3. **更好的封装**：隐藏接口内部的实现细节
4. **更清晰的API设计**：只暴露必要的方法给外部

## 注意事项

1. Java 8及更早版本不支持接口私有方法
2. 私有方法不能是`abstract`的
3. 私有方法不能被`default`或`public`等其他修饰符修饰
4. 在接口继承体系中，子接口不能访问父接口的私有方法

接口私有方法的引入使得Java接口的设计更加灵活和强大，能够更好地组织内部代码结构，同时保持对外接口的简洁性。