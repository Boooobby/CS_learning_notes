# 序列化（Serialization）

序列化是指将对象转换为可以存储或传输的格式（通常是字节流）的过程，以便后续可以重建该对象。

## 核心概念

1. **序列化（Serialization）**：
   - 将对象的状态信息转换为可存储或可传输的形式
   - 在Java中通常指将对象转换为字节流

2. **反序列化（Deserialization）**：
   - 将序列化的数据重新转换为对象
   - 是序列化的逆过程

## 主要用途

- **持久化存储**：将对象保存到文件或数据库中
- **网络传输**：通过网络发送对象数据
- **进程间通信**：在不同JVM或不同语言间传递对象
- **缓存**：将对象缓存到内存或分布式缓存中

## Java中的序列化实现

在Java中，实现`java.io.Serializable`接口的类可以被序列化：

```java
import java.io.*;

// 实现Serializable接口
class Person implements Serializable {
    private String name;
    private int age;
    
    // 构造方法、getter/setter等
}

public class SerializationDemo {
    public static void main(String[] args) {
        // 序列化
        try (ObjectOutputStream oos = new ObjectOutputStream(
                new FileOutputStream("person.ser"))) {
            Person p = new Person("张三", 25);
            oos.writeObject(p);  // 序列化对象到文件
        } catch (IOException e) {
            e.printStackTrace();
        }
        
        // 反序列化
        try (ObjectInputStream ois = new ObjectInputStream(
                new FileInputStream("person.ser"))) {
            Person p = (Person) ois.readObject();  // 从文件反序列化对象
            System.out.println(p.getName());  // 输出: 张三
        } catch (IOException | ClassNotFoundException e) {
            e.printStackTrace();
        }
    }
}
```

## 序列化ID（serialVersionUID）

- 用于标识类的版本
- 如果没有显式声明，编译器会自动生成
- 建议显式声明以避免兼容性问题

```java
private static final long serialVersionUID = 1L;
```

## 注意事项

1. **transient关键字**：标记不需要序列化的字段
   ```java
   private transient String password;  // 不会被序列化
   ```

2. **静态变量**：不会被序列化（属于类而非对象）

3. **安全性**：反序列化可能带来安全风险，需验证数据来源

4. **性能**：大量数据的序列化可能影响性能

## 其他序列化技术

除了Java原生序列化，还有：
- **JSON**（如Jackson、Gson）
- **XML**（如JAXB）
- **Protocol Buffers**（Google的高效二进制格式）
- **Avro**、**Thrift**（常用于大数据领域）

序列化是现代分布式系统和数据持久化的基础技术，理解其原理对开发复杂系统非常重要。