在实际项目中指定 Java 版本非常简单，`jenv` 提供了几种灵活的方式。以下是具体操作指南：

---

### 方法 1：为项目目录设置局部版本（推荐）
**适用场景**：团队项目需要固定特定 Java 版本

```bash
# 进入项目根目录
cd /path/to/your_project

# 设置该项目使用的 Java 版本（会自动创建 .java-version 文件）
jenv local 17.0.15  # 或 21.0.7

# 验证
cat .java-version   # 应输出 17.0.15
java -version       # 会自动切换为该版本
```

**效果**：
- 会在项目根目录生成隐藏文件 `.java-version`
- 只要在该目录或其子目录下执行命令，都会自动切换版本
- 文件可提交到 Git，确保团队成员版本一致

---

### 方法 2：临时会话切换
**适用场景**：快速测试不同版本兼容性

```bash
# 仅在当前终端会话生效
jenv shell 21.0.7

# 验证
java -version  # 显示 21.0.7

# 重置会话版本（恢复为全局或本地设置）
jenv shell --unset
```

---

### 方法 3：通过 IDE 集成
#### VS Code 示例：
1. 安装扩展：
   - [Extension Pack for Java](https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack)
2. 添加配置：
   ```json
   // .vscode/settings.json
   {
     "java.configuration.runtimes": [
       {
         "name": "JavaSE-17",
         "path": "/Users/你的用户名/.jenv/versions/17.0.15",
         "default": true
       },
       {
         "name": "JavaSE-21",
         "path": "/Users/你的用户名/.jenv/versions/21.0.7"
       }
     ]
   }
   ```

#### IntelliJ IDEA：
1. `File > Project Structure > SDKs`
2. 添加 jenv 管理的 JDK 路径：
   ```
   ~/.jenv/versions/17.0.15
   ```

---

### 方法 4：通过构建工具配置
#### Maven 项目：
```xml
<!-- pom.xml -->
<properties>
  <maven.compiler.source>17</maven.compiler.source>
  <maven.compiler.target>17</maven.compiler.target>
</properties>
```

#### Gradle 项目：
```groovy
// build.gradle
java {
  toolchain {
    languageVersion = JavaLanguageVersion.of(17)
  }
}
```

---

### 版本切换原理
1. **优先级顺序**：
   ```text
   jenv shell > 项目目录的 .java-version > jenv global > system
   ```

2. **自动检测**：
   - 当你在终端执行命令时，`jenv` 会：
     1. 检查当前目录及其父目录是否存在 `.java-version`
     2. 如果找到，则使用指定版本
     3. 否则回退到全局版本

---

### 最佳实践建议
1. **团队项目**：
   - 将 `.java-version` 文件加入版本控制
   - 示例文件内容：
     ```
     17.0.15
     ```

2. **个人项目**：
   - 使用 `jenv local` 设置后，可通过以下命令快速验证：
     ```bash
     # 在项目目录执行
     ./mvnw clean package  # 或 ./gradlew build
     ```

3. **故障排查**：
   ```bash
   # 查看当前生效版本
   jenv version-name

   # 查看实际Java路径
   jenv which java
   ```

---

### 完整工作流示例
```bash
# 1. 创建新项目
mkdir my-project && cd my-project

# 2. 设置项目Java版本
jenv local 21.0.7

# 3. 初始化Maven项目
mvn archetype:generate -DgroupId=com.example -DartifactId=demo

# 4. 开发时自动使用JDK 21
# （所有在my-project目录下的操作都会自动切换版本）
``` 

通过以上方法，你可以精准控制每个项目的 Java 版本，避免环境不一致导致的问题。