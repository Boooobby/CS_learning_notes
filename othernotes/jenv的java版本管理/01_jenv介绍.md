# 深入理解 `jenv`：Java 环境管理工具

`jenv` 是一个轻量级的命令行工具，专门用于管理多个 Java 开发工具包（JDK）版本。它类似于 Python 的 `pyenv` 或 Node.js 的 `nvm`，但专注于 Java 环境管理。

## 核心功能

1. **多版本管理**：
   - 同时安装和切换不同版本的 JDK（如 Java 8/11/17/21）
   - 支持 OpenJDK、Oracle JDK、Amazon Corretto 等多种发行版

2. **环境隔离**：
   - 全局设置（整个系统默认）
   - 本地目录设置（项目特定）
   - Shell 会话临时设置

3. **插件扩展**：
   - 支持 Maven/Gradle 等工具的环境集成
   - 可扩展其他 Java 生态工具

## 工作原理

`jenv` 通过三个关键机制工作：

1. **版本注册**：
   - 将系统中已安装的 JDK 注册到 `jenv` 的版本库
   - 不实际安装 JDK，只管理现有安装

2. **环境变量控制**：
   - 动态修改 `JAVA_HOME` 和 `PATH`
   - 通过 shim 机制重定向 `java`/`javac` 命令

3. **优先级系统**：
   ```
   会话设置 > 本地设置 > 全局设置
   ```

## 典型工作流示例

```bash
# 查看可用版本
jenv versions

# 设置全局默认版本
jenv global 17.0

# 为特定项目设置版本（创建.java-version文件）
cd my-project
jenv local 11.0

# 临时为当前shell会话使用特定版本
jenv shell 1.8
```

## 与其他工具对比

| 特性        | jenv | SDKMAN! | 手动管理 |
|-----------|------|--------|-------|
| 多版本支持    | ✓    | ✓      | ✓     |
| 自动切换     | ✓    | ✓      | ✗     |
| 依赖管理     | ✗    | ✓      | ✗     |
| 跨平台支持    | ✗    | ✓      | ✓     |
| 轻量级      | ✓    | ✗      | ✓     |

## 适用场景

**推荐使用**：
- macOS/Linux 开发环境
- 需要频繁切换JDK版本
- 多个项目使用不同Java版本

**不适用场景**：
- Windows 系统（原生支持有限）
- 需要自动化CI/CD环境（考虑直接设置JAVA_HOME）
- 需要完整的依赖管理（应结合Maven/Gradle）

`jenv` 的本质是通过精巧的环境变量管理，为Java开发者提供无缝的版本切换体验，而无需关心底层路径配置的复杂性。