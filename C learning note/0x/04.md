# C语言学习笔记
## 第四部分（位运算 回调函数 宏）

### 一、位运算
- 位运算只针对整型和字符型 对其二进制数直接进行操作

1. 位与 `&`
   - 对于每一位，如果两个操作数的相应位都为1，则结果的相应位为1，否则为0
   - `2 & 3 == 2`
2. 位或 `|`
   - 对于每一位，如果两个操作数的相应位至少有一个为1，则结果的相应位为1，否则为0
   - `2 | 3 == 3`
3. 位非 `~`
   - 它对操作数的每一位进行取反操作，即0变为1，1变为0
   - `~2 == -3`（是%d时）
4. 位异或 `^`
   - 对于每一位，如果两个操作数的相应位不同，则结果的相应位为1，否则为0
   - `2 ^ 3 == 1`
5. 左移 `<<`
   - 它将操作数的二进制表示向左移动指定的位数，最低位补0
   - `2 << 1 == 4`
   - 左移几位 是相当于乘几个2（在没有溢出的情况下）
6. 右移 `>>`
   - 它将操作数的二进制表示向右移动指定的位数，最高位补原本的符号位
   - `4 >> 1 == 2`
   - 右移几位 是相当于除以几个2（在没有溢出的情况下）
   - 操作数为正数的情况下 相当于整数除法
   - 操作数为负数的情况下 稍微不同于整数除法 绝对值往上取整
7. 运用：
   1. 看最低位是0还是1
   2. 看最高位是0还是1
   3. 用一个变量表示多种状态
        - 二进制数 每一位来表示一个状态 再通过位运算来读取
### 二、回调函数
1. 回调函数（callback function）就是

### 三、宏
1. 预定义宏：![alt text](image-1.png)
   - 可以用在大型项目中 找出具体文件和其行数（错误处理）
2. 宏定义即为直接替换 没有其他的
3. 宏定义不需要加分号`;` 因为其不是C语言中的语句 是预编译
4. 宏定义一个表达式的话 用小括号括起来`()` 这样才可以先计算值（因为是简单的替换 所以计算上可能有优先级问题）
5. 宏名一般全用大写（习惯）
6. 带参宏：
   1. 实现类似函数的功能 但是不需要额外占用内存
   2. 定义：`#define MAX(a, b) (a>b?a:b)`
   3. 要用圆括号包裹（原因同上）
   4. 对于`#define S(num) ((num)*(num))` 每一个参数都要用括号包裹
      - 反例：`#define S(num) (num*num)` `S(5+3) == (5+3*5+3) == 23 != 64`
   5. 带参宏不需要指定类型 因为仅仅是替换 不为形参分配内存
   6. 带参宏还可以实现一些函数实现不了的功能
      - 当要传入数据类型的时候 函数无法实现 而宏是作简单替换 故可以实现
         - `#define MALLOC(size, type) (type*)malloc((size) * sizeof(type))`
         - 如此代码会变的异常简洁：`int* p = MALLOC(5, int);`
7. 取消宏定义：`#undef 宏名`

