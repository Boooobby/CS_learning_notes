好的，接下来我将对 `printf` 的用法做一个详细的介绍，并重点讲解其格式化字符串的使用方法，包括 `printf` 中的各种格式说明符、修饰符以及其应用。

### `printf` 函数简介

`printf` 是 C 语言中的标准输出函数，用于向控制台打印格式化的文本。它在 `<stdio.h>` 头文件中声明，基本的语法如下：

```c
#include <stdio.h>

int printf(const char *format, ...);
```

- **`format`**：一个字符串，其中包含文本和格式说明符。格式说明符以 `%` 开头，用于指示如何输出后续的参数。
- **`...`**：表示可变参数，`printf` 可以接受一个或多个参数，根据 `format` 字符串中的格式说明符来决定如何格式化和打印这些参数。

### 基本用法

```c
printf("Hello, world!\n");
```

上面这行代码会输出：
```
Hello, world!
```

### 格式说明符

格式说明符是 `printf` 最强大的功能之一，允许我们精确控制输出的内容、格式和精度。格式说明符以 `%` 开头，后面可以跟可选的标志、宽度、精度等内容，最后是一个类型字符。

常见的格式说明符如下：

#### 1. **整数类型**
   - **`%d`** 或 **`%i`**：输出带符号的十进制整数。
   - **`%u`**：输出无符号十进制整数。
   - **`%o`**：输出无符号八进制整数。
   - **`%x`**：输出无符号十六进制整数（小写字母）。
   - **`%X`**：输出无符号十六进制整数（大写字母）。

   示例：
   ```c
   int num = 42;
   printf("num = %d\n", num);  // 输出：num = 42
   printf("num = %x\n", num);  // 输出：num = 2a
   ```

#### 2. **浮点数类型**
   - **`%f`**：输出浮点数，默认六位小数。
   - **`%e`** 或 **`%E`**：输出浮点数，采用科学计数法（小写 `e` 或大写 `E`）。
   - **`%g`** 或 **`%G`**：根据数值的大小，自动选择 `%f` 或 `%e`。

   示例：
   ```c
   float pi = 3.14159265;
   printf("pi = %f\n", pi);   // 输出：pi = 3.141593
   printf("pi = %.2f\n", pi); // 输出：pi = 3.14
   ```

#### 3. **字符类型**
   - **`%c`**：输出单个字符。
   - **`%s`**：输出字符串（以 `\0` 结束的字符数组）。

   示例：
   ```c
   char letter = 'A';
   char str[] = "Hello, world!";
   printf("letter = %c\n", letter);  // 输出：letter = A
   printf("str = %s\n", str);        // 输出：str = Hello, world!
   ```

#### 4. **指针类型**
   - **`%p`**：输出指针的地址。

   示例：
   ```c
   int a = 5;
   int* ptr = &a;
   printf("pointer = %p\n", ptr);  // 输出：pointer = 0x7ffee0a2b8b8 (这个地址会根据系统不同而不同)
   ```

#### 5. **百分号**
   - **`%%`**：输出一个百分号 `%`。

   示例：
   ```c
   printf("100%% complete\n");  // 输出：100% complete
   ```

### `printf` 的修饰符

除了格式说明符之外，`printf` 还可以使用一些修饰符来控制输出的宽度、精度、对齐方式等。

#### 1. **字段宽度**（Field Width）
字段宽度指定了打印的数据至少占多少个字符位置。如果数据的字符数不足，`printf` 会用空格填充。

- **`%5d`**：输出一个至少 5 个字符宽度的整数。如果输出的整数位数不足 5，前面会补充空格。

示例：
```c
int num = 42;
printf("%5d\n", num);  // 输出：   42
```

#### 2. **精度**（Precision）
精度用于控制输出的小数位数或字符串的最大字符数。

- 对于浮点数，精度控制小数点后显示的位数。
- 对于字符串，精度控制输出的最大字符数。

示例：
```c
float pi = 3.14159265;
printf("%.3f\n", pi);  // 输出：3.142 (保留三位小数)

char str[] = "Hello, world!";
printf("%.5s\n", str);  // 输出：Hello (只输出前 5 个字符)
```

#### 3. **对齐方式**
- 默认情况下，数字和字符串是右对齐的。
- 使用 **`-`** 标志可以让输出左对齐。

示例：
```c
printf("%-5d\n", 42);  // 输出：42   (左对齐)
```

#### 4. **0 填充**
- 使用 **`0`** 标志，可以让数字在字段宽度不足时用零填充，而不是空格。

示例：
```c
int num = 42;
printf("%05d\n", num);  // 输出：00042
```

### 示例：使用 `printf` 打印部分字符串

之前，我们提到要打印子字符串 `t`，并且需要用 `printf` 来控制输出。

假设我们有以下代码：
```c
char* s = "abcbb23";
char* t = "bb2";
printf("%.*s\n", (int)strlen(t), strstr(s, t));  // 只打印 t 的部分
```

在这里，`%.*s` 用于打印从指针 `temp`（即 `strstr(s, t)` 的返回值）开始的部分字符串，且长度为 `strlen(t)`。通过指定精度，我们确保只打印出 `t`，而不会打印后面的字符。

### 解释：
- **`%.*s`**：`*` 表示精度是动态给定的，精度由前面的参数给出。在这里，`(int)strlen(t)` 作为精度，确保只打印 `t` 长度的字符。
- **`strstr(s, t)`**：返回一个指向 `t` 在 `s` 中位置的指针。

### 总结

`printf` 是 C 语言中一个非常强大的输出函数，它通过格式化字符串让我们能够精确控制输出内容的格式。常见的格式说明符包括：
- **`%d`**、**`%f`**、**`%s`**、**`%c`** 等，用于打印不同类型的数据。
- **字段宽度**、**精度**、**对齐方式**、**0 填充**等修饰符，用于控制输出格式。

通过合理使用格式化字符串，可以非常灵活和精确地打印数据，满足各种输出需求。