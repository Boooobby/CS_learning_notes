这是一个计算机网络中非常经典和重要的问题，答案很明确，但需要分情况讨论。

**关键结论：窗口最大容量取决于协议使用的序号空间大小（n位）和协议类型。**

**你的两个数字都是正确的，但分别对应不同的协议：**

---

### 1. 对于 **回退N帧协议**：最大发送窗口尺寸 = \( 2^n - 1 \)

*   **原因（核心：避免“向前歧义”）**：
    *   假设序号用 n=3 位表示，序号空间为 0~7。
    *   发送窗口大小 \( W_s \) 不能等于 \( 2^n = 8 \)。
    *   **思考一个极端场景**：
        1.  发送方发送了序号 0~7 的共 8 个帧。
        2.  接收方正确接收了这 8 个帧，并发送了 8 个 ACK（假设ACK也全部到达）。
        3.  然而，**这 8 个 ACK 全部在网络中丢失了**。发送方超时。
        4.  发送方认为所有帧都丢失了，于是**重传序号 0~7 的帧**。
        5.  此时，接收方应该认为这是**新的 0~7 号帧**（下一轮），还是**旧的重传帧**？**接收方无法区分！**
    *   如果窗口最大是 \( 2^n - 1 = 7 \)，即使所有 ACK 丢失，发送方重传的旧帧序号范围是 0~6。而此时接收方期待的新帧序号至少是 7（因为旧帧0~6已接收并交付），新旧帧的序号没有重叠，接收方可以明确区分。
    *   **因此，GBN 需要 \( W_s \le 2^n - 1 \)。**

---

### 2. 对于 **选择重传协议**：最大发送/接收窗口尺寸 = \( 2^{n-1} \)

*   **原因（核心：避免“向后歧义”或“窗口重叠”）**：
    *   同样假设 n=3，序号 0~7。
    *   接收方也有一个窗口，用于缓存失序到达的帧。
    *   **思考另一个极端场景**：
        1.  设定发送窗口 \( W_s = 7 \)，接收窗口 \( W_r = 7 \)。
        2.  发送方发送了序号 0~6 的帧。
        3.  接收方正确接收，并将接收窗口向前滑动到期待序号 7, 0, 1, 2, 3, 4, 5 （因为序号是循环使用的）。
        4.  接收方发送了 ACK，但这些 ACK **全部丢失**。发送方超时。
        5.  发送方重传旧的 **0~6 号帧**。
        6.  此时，接收方当前的窗口正好覆盖了序号 7, 0, 1, 2, 3, 4, 5。它会将重传的旧 0~5 号帧 **错误地当作新帧接收**（因为落入了它的接收窗口）！
    *   为了避免这种新旧帧在接收窗口内无法区分的情况，必须保证：**发送窗口和接收窗口的大小之和不超过序号空间总数 \( 2^n \)**，即 \( W_s + W_r \le 2^n \)。
    *   为了最大化利用，通常令 \( W_s = W_r \)，所以 \( W_s = W_r \le 2^{n-1} \)。
    *   **因此，SRP 需要 \( W_s, W_r \le 2^{n-1} \)。**

---

### 总结对比表

| 特性 | 回退N帧 | 选择重传 |
| :--- | :--- | :--- |
| **最大发送窗口尺寸** | **\( 2^n - 1 \)** | **\( 2^{n-1} \)** |
| **接收窗口尺寸** | 1 | **\( 2^{n-1} \)** |
| **限制的根本原因** | 避免**向前歧义** <br>（所有ACK丢失导致的新旧帧序号完全重合） | 避免**向后歧义/窗口重叠** <br>（接收窗口与重传帧序号范围部分重合） |
| **数学约束** | \( W_s \le 2^n - 1 \) | \( W_s + W_r \le 2^n \) |
| **直观例子 (n=3)** | 序号0-7，窗口最大为**7**。 <br>新旧帧的序号集合不会完全相等。 | 序号0-7，窗口最大为**4**。 <br>新旧帧的序号范围永远不会同时落入对方的有效窗口。 |

### 记忆与应试要点

1.  **遇到选择题或判断题**，一定要看清题目问的是 **Go-Back-N** 还是 **Selective Repeat**。
2.  **如果题目没有明确说明**，通常的默认或最安全的答案是：
    *   对于 **发送窗口最大值**，答 \( 2^n - 1 \) 对应 GBN。
    *   对于 **选择重传的窗口限制**，答 \( 2^{n-1} \)。
3.  **理解逻辑比死记硬背更重要**：核心矛盾都是**序号空间有限且循环使用**导致的**新旧帧无法区分**问题，只是两种协议产生该问题的场景不同。

所以，你的两个数字都是对的，但它们是**解决不同协议下不同问题**的答案。