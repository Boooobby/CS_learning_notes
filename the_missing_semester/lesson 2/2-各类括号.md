在 Linux Shell 中，**括号**（包括圆括号、方括号、花括号等）有不同的用途，每种括号组合都有特定的功能。以下是各种括号的详细分类及作用：

---

## **1. 圆括号 `( )`**
### **(1) 命令组（子Shell执行）**
- 在 **子Shell** 中执行命令，**不影响当前Shell环境**（变量修改不会传递到父Shell）：
  ```bash
  (cd /tmp; ls)  # 在子Shell中切换目录并列出文件，父Shell仍保持原目录
  ```

### **(2) 数组初始化**
- 定义数组：
  ```bash
  fruits=("apple" "banana" "cherry")
  echo ${fruits[1]}  # 输出: banana
  ```

### **(3) 算术运算**
- 需配合 `$(( ))`（见下文）。

### **(4) 进程替换（结合 `<`/`>`）**
- `<()` 和 `>()`（见前文进程替换部分）。

---

## **2. 双圆括号 `(( ))`**
### **算术运算**
- 用于整数计算，支持 `++`、`--`、`+=` 等操作：
  ```bash
  (( a = 5 + 3 ))
  echo $a  # 输出: 8
  ```
- 可直接用于 `if` 条件：
  ```bash
  if (( $a > 10 )); then
      echo "大于10"
  fi
  ```

---

## **3. 方括号 `[ ]`**
### **(1) 条件测试（`test` 命令的别名）**
- 用于文件、字符串、数值的比较（需用空格分隔）：
  ```bash
  [ -f "/etc/passwd" ] && echo "文件存在"
  [ "$name" = "Alice" ] || echo "不是Alice"
  ```
- **常见选项**：
  - `-f`（文件存在）、`-d`（目录存在）、`-z`（字符串为空）。
  - `-eq`（数值相等）、`-ne`（数值不等）。

### **(2) 数组索引**
- 访问数组元素：
  ```bash
  echo ${array[0]}  # 输出第一个元素
  ```

---

## **4. 双方括号 `[[ ]]`**
### **增强版条件测试**
- 比 `[ ]` 更强大，支持：
  - **模式匹配**（`==` 和 `=~`）：
    ```bash
    [[ "$file" == *.txt ]] && echo "文本文件"
    [[ "$str" =~ ^[0-9]+$ ]] && echo "纯数字"
    ```
  - **逻辑组合**（无需转义 `&&`/`||`）：
    ```bash
    [[ -f file && -r file ]] && echo "可读文件"
    ```
  - **字符串比较更安全**（避免变量未加引号的问题）。

---

## **5. 花括号 `{ }`**
### **(1) 代码块（当前Shell执行）**
- 将多条命令组合为单块，**在当前Shell执行**（变量修改会影响父Shell）：
  ```bash
  { cd /tmp; ls; }  # 注意：花括号内首尾必须有空格和分号
  ```

### **(2) 变量扩展**
- 明确变量边界：
  ```bash
  echo "${var}_log"  # 避免歧义（如 $var_log 会被误认为另一个变量）
  ```

### **(3) 序列生成**
- 生成数字或字母序列：
  ```bash
  echo {1..5}      # 输出: 1 2 3 4 5
  echo {a..c}.txt  # 输出: a.txt b.txt c.txt
  ```

### **(4) 文件名通配扩展**
- 匹配多个文件：
  ```bash
  cp /path/{file1,file2} /backup  # 复制 file1 和 file2
  ```

---

## **6. 尖括号 `< >`**
### **(1) 输入/输出重定向**
- `<`：从文件读取输入：
  ```bash
  wc -l < file.txt  # 统计文件行数
  ```
- `>`：覆盖写入文件：
  ```bash
  echo "Hello" > output.txt
  ```
- `>>`：追加写入文件：
  ```bash
  echo "World" >> output.txt
  ```

### **(2) 进程替换**
- `<()` 和 `>()`（见前文）。

---

## **7. 反引号 `` ` ``**
### **命令替换（已过时）**
- 等同于 `$()`，但嵌套时需要转义：
  ```bash
  echo "Today is `date`"      # 旧写法
  echo "Today is $(date)"     # 推荐写法
  ```

---

## **8. 中括号 `[ ]` vs 双方括号 `[[ ]]`**
| 特性               | `[ ]`（`test` 命令）       | `[[ ]]`（Bash 扩展）       |
|--------------------|---------------------------|---------------------------|
| 逻辑操作符         | 需用 `-a`/`-o`            | 直接使用 `&&`/`||`         |
| 字符串比较         | `=`/`!=`（可能需引号）     | `==`/`=~`（支持模式匹配）  |
| 变量未加引号       | 可能报错                  | 更安全                    |
| 支持算术比较       | 不支持                    | 支持（如 `[[ $a -lt 10 ]]`）|

---

## **9. 括号优先级**
在复杂表达式中，括号的优先级从高到低：
1. `(( ))`（算术运算）
2. `[[ ]]`（条件测试）
3. `[ ]`（基础测试）
4. `( )`（子Shell）和 `{ }`（代码块）

---

## **10. 示例汇总**
```bash
# 1. 子Shell
(cd /tmp; ls)

# 2. 算术运算
(( result = 5 * 3 ))

# 3. 条件测试
[ -f file.txt ] && echo "存在"
[[ "$str" == *.* ]] && echo "含点号"

# 4. 代码块
{ echo "Start"; sleep 1; echo "End"; }

# 5. 序列生成
echo {A..C}{1..3}  # A1 A2 A3 B1 B2 B3 C1 C2 C3

# 6. 文件重定向
sort < input.txt > sorted.txt
```

---

## **总结表**
| 括号类型       | 语法示例                  | 主要用途                     |
|----------------|--------------------------|-----------------------------|
| `( )`          | `(cmd1; cmd2)`           | 子Shell执行                 |
| `(( ))`        | `((a = 5 + 3))`          | 算术运算                    |
| `[ ]`          | `[ -f file ]`            | 条件测试（基础版）          |
| `[[ ]]`        | `[[ "$str" == *.* ]]`    | 条件测试（增强版）          |
| `{ }`          | `{ cmd1; cmd2; }`        | 代码块（当前Shell）         |
| `< >`          | `cmd < input.txt`        | 输入/输出重定向             |
| `<() / >()`    | `diff <(cmd1) <(cmd2)`   | 进程替换                    |

掌握括号的用法可以大幅提升 Shell 脚本的编写效率和可读性！