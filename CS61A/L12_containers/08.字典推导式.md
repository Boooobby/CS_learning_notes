# Python中的字典推导式

字典推导式(Dictionary Comprehension)是Python中一种简洁高效的创建字典的方法，它借鉴了列表推导式的概念，允许我们用一行代码快速生成字典。

## 基本语法

字典推导式的基本语法格式为：

```python
{key_expression: value_expression for item in iterable}
```

或者带有条件判断的：

```python
{key_expression: value_expression for item in iterable if condition}
```

## 简单示例

1. 创建一个数字到其平方的字典：

```python
squares = {x: x**2 for x in range(6)}
# 输出: {0: 0, 1: 1, 2: 4, 3: 9, 4: 16, 5: 25}
```

2. 将两个列表合并为字典：

```python
keys = ['a', 'b', 'c']
values = [1, 2, 3]
my_dict = {k: v for k, v in zip(keys, values)}
# 输出: {'a': 1, 'b': 2, 'c': 3}
```

## 带条件的字典推导式

可以添加条件过滤：

```python
even_squares = {x: x**2 for x in range(10) if x % 2 == 0}
# 输出: {0: 0, 2: 4, 4: 16, 6: 36, 8: 64}
```

## 嵌套字典推导式

字典推导式可以嵌套：

```python
matrix = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
flattened = {(i, j): matrix[i][j] for i in range(3) for j in range(3)}
# 输出: {(0, 0): 1, (0, 1): 2, (0, 2): 3, 
#       (1, 0): 4, (1, 1): 5, (1, 2): 6,
#       (2, 0): 7, (2, 1): 8, (2, 2): 9}
```

## 字典键值互换

```python
original = {'a': 1, 'b': 2, 'c': 3}
swapped = {v: k for k, v in original.items()}
# 输出: {1: 'a', 2: 'b', 3: 'c'}
```

## 字典推导式 vs for循环

字典推导式通常比等效的for循环更简洁高效：

```python
# 使用for循环
squares = {}
for x in range(6):
    squares[x] = x**2

# 使用字典推导式
squares = {x: x**2 for x in range(6)}
```

## 注意事项

1. 字典推导式中键必须是唯一的，如果键重复，后面的值会覆盖前面的值
2. 字典推导式适合简单的转换和过滤，对于复杂逻辑可能影响可读性
3. Python 2.7+和Python 3.x都支持字典推导式

字典推导式是Python中非常实用的特性，能够让你的代码更加简洁和Pythonic。