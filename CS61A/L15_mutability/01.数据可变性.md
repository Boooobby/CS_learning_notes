在 Python 中，数据类型的 **可变性（Mutability）** 是一个非常重要的概念，它决定了对象创建后是否可以修改。Python 的数据类型可以分为 **可变（Mutable）** 和 **不可变（Immutable）** 两大类。

---

## **1. 不可变数据类型（Immutable）**
**特点**：
- 一旦创建，**不能修改**（如修改会创建新对象）。
- 如果尝试修改，Python 会 **新建一个对象**，而不是修改原对象。
- 适用于 **安全的数据共享**（如函数参数传递时不用担心被意外修改）。

### **常见的不可变类型**
| 类型      | 示例                | 说明                     |
|-----------|---------------------|--------------------------|
| `int`     | `x = 10`            | 整数                     |
| `float`   | `y = 3.14`          | 浮点数                   |
| `bool`    | `flag = True`       | 布尔值                   |
| `str`     | `s = "hello"`       | 字符串                   |
| `tuple`   | `t = (1, 2, 3)`     | 元组（元素不可变）       |
| `frozenset` | `fs = frozenset({1, 2})` | 不可变的集合           |
| `bytes`   | `b = b"hello"`      | 字节串（不可变二进制数据）|

### **示例**
```python
a = 10
b = a  # b 和 a 指向同一个对象
b = 20  # 修改 b 不会影响 a，因为 int 是不可变的
print(a)  # 输出: 10（a 不变）

s = "hello"
# s[0] = 'H'  # 报错！str 不可变
new_s = s.replace('h', 'H')  # 返回新字符串
print(new_s)  # 输出: "Hello"（原 s 不变）
```

---

## **2. 可变数据类型（Mutable）**
**特点**：
- 创建后 **可以修改**（如增删改元素）。
- 修改时 **不会创建新对象**（内存地址不变）。
- 适用于 **动态变化的数据**（如列表、字典）。

### **常见的可变类型**
| 类型      | 示例                | 说明                     |
|-----------|---------------------|--------------------------|
| `list`    | `lst = [1, 2, 3]`   | 列表                     |
| `dict`    | `d = {"a": 1}`      | 字典                     |
| `set`     | `s = {1, 2, 3}`     | 集合                     |
| `bytearray` | `ba = bytearray(b"hello")` | 可变的字节数组 |
| `array.array` | `arr = array.array('i', [1, 2, 3])` | 高效数组 |

### **示例**
```python
lst = [1, 2, 3]
lst[0] = 100  # 直接修改列表
print(lst)  # 输出: [100, 2, 3]（原列表被修改）

d = {"a": 1}
d["b"] = 2  # 新增键值对
print(d)  # 输出: {'a': 1, 'b': 2}（原字典被修改）

s = {1, 2, 3}
s.add(4)  # 添加元素
print(s)  # 输出: {1, 2, 3, 4}（原集合被修改）
```

---

## **3. 可变 vs 不可变的关键区别**
| 特性              | 可变数据类型（Mutable） | 不可变数据类型（Immutable） |
|-------------------|-----------------------|---------------------------|
| **创建后能否修改** | ✅ 可以修改           | ❌ 不能修改（只能新建）     |
| **内存地址是否变化** | 修改后不变           | 修改后变化（新对象）        |
| **线程安全性**     | ❌ 不安全（需加锁）   | ✅ 安全（天然线程安全）     |
| **适用场景**       | 动态数据（如缓存）   | 常量数据（如配置）         |

---

## **4. 可变数据与不可变数据在函数中的表现**
### **（1）不可变数据（函数内修改不影响外部）**
```python
def modify_num(x):
    x += 10  # 由于 int 不可变，这里创建了新对象
    print("Inside:", x)  # 输出: Inside: 20

a = 10
modify_num(a)
print("Outside:", a)  # 输出: Outside: 10（a 不变）
```

### **（2）可变数据（函数内修改会影响外部）**
```python
def modify_list(lst):
    lst.append(4)  # 直接修改原列表
    print("Inside:", lst)  # 输出: Inside: [1, 2, 3, 4]

my_list = [1, 2, 3]
modify_list(my_list)
print("Outside:", my_list)  # 输出: Outside: [1, 2, 3, 4]（被修改！）
```

---

## **5. 如何判断一个对象是可变还是不可变？**
可以使用 `id()` 查看内存地址：
```python
a = 10
print(id(a))  # 输出: 140735849617792
a += 1
print(id(a))  # 输出: 140735849617824（地址变了，说明 int 不可变）

lst = [1, 2, 3]
print(id(lst))  # 输出: 2106783447680
lst.append(4)
print(id(lst))  # 输出: 2106783447680（地址不变，说明 list 可变）
```

---

## **6. 总结**
- **不可变数据**（如 `int`, `str`, `tuple`）：
  - 创建后不能修改，修改会创建新对象。
  - 适用于 **常量、线程安全** 场景。
- **可变数据**（如 `list`, `dict`, `set`）：
  - 创建后可以修改，内存地址不变。
  - 适用于 **动态数据、缓存** 场景。

理解可变和不可变数据类型对 Python 编程至关重要，特别是在 **函数传参、内存管理、线程安全** 等方面！