在 Python 中，`str` 和 `repr` 都用于对象的字符串表示，但它们的用途和实现方式有所不同。以下是它们的异同点：

---

### **相同点**
1. **返回字符串**：两者都返回对象的字符串表示形式。
2. **可被重写**：都可以通过类中的 `__str__` 和 `__repr__` 方法自定义。

---

### **不同点**
| 特性                | `str`                          | `repr`                          |
|---------------------|-------------------------------|---------------------------------|
| **目的**            | 用户友好的输出                | 明确的、机器可读的输出（通常用于调试） |
| **调用方式**        | `str(obj)` 或 `print(obj)`     | `repr(obj)` 或在交互式环境中直接输入 `obj` |
| **默认实现**        | 若未定义 `__str__`，则回退到 `__repr__` | 默认返回 `<对象地址>`（如 `<__main__.Foo object at 0x...>`） |
| **适用场景**        | 终端输出、日志展示等          | 调试、开发时查看对象详细信息      |
| **对字符串的处理**  | 直接输出字符串内容（如 `"hello"`） | 输出带引号的字符串（如 `"'hello'"`） |

---

### **示例代码**
```python
class Person:
    def __init__(self, name, age):
        self.name = name
        self.age = age
    
    def __str__(self):
        return f"Person: {self.name}, {self.age} years old"
    
    def __repr__(self):
        return f"Person(name='{self.name}', age={self.age})"

p = Person("Alice", 30)

# 调用 str (用户友好)
print(str(p))   # 输出: Person: Alice, 30 years old

# 调用 repr (明确且可调试)
print(repr(p))  # 输出: Person(name='Alice', age=30)
```

---

### **关键注意事项**
1. **优先定义 `__repr__**：  
   如果类未定义 `__str__`，Python 会调用 `__repr__` 作为备用。因此建议至少定义 `__repr__`。
2. **字符串的差异**：  
   - `str("hi")` → `hi`  
   - `repr("hi")` → `"'hi'"`（多了一层引号，明确表示是字符串）
3. **`eval` 的兼容性**：  
   `repr` 的设计目标之一是让 `eval(repr(obj)) == obj` 成立（如数字、字符串等简单类型）。

---

### **何时使用？**
- 用 `str`：面向用户输出的场景（如日志、界面显示）。  
- 用 `repr`：调试、开发时快速查看对象内部状态。

通过区分两者，Python 能更灵活地适应不同场景的字符串表示需求。