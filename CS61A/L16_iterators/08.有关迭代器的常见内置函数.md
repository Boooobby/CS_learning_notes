# Python 中常见的迭代器相关内置函数

Python 提供了一系列内置函数来处理迭代器和可迭代对象，这些函数极大增强了迭代操作的表达能力。以下是主要的迭代器相关内置函数及其用法：

## 1. 基础迭代函数

### `iter()`
- 作用：将可迭代对象转换为迭代器
- 示例：
  ```python
  lst = [1, 2, 3]
  it = iter(lst)
  print(next(it))  # 1
  ```

### `next()`
- 作用：从迭代器获取下一个值
- 可提供默认值：
  ```python
  it = iter([1])
  print(next(it, 'default'))  # 1
  print(next(it, 'default'))  # 'default'
  ```

## 2. 迭代工具函数

### `enumerate()`
- 作用：为可迭代对象添加索引
- 示例：
  ```python
  for i, v in enumerate(['a', 'b', 'c'], start=1):
      print(f"{i}: {v}")
  # 输出:
  # 1: a
  # 2: b
  # 3: c
  ```

### `zip()`
- 作用：并行迭代多个可迭代对象
- 示例：
  ```python
  names = ['Alice', 'Bob']
  scores = [85, 92]
  for name, score in zip(names, scores):
      print(f"{name}: {score}")
  ```

### `reversed()`
- 作用：反向迭代序列（非惰性，要求对象实现 `__reversed__` 或支持序列协议）
- 示例：
  ```python
  for i in reversed(range(3)):
      print(i)  # 2, 1, 0
  ```

## 3. 迭代计算函数

### `sum()`
- 作用：对可迭代对象的数值求和
- 示例：
  ```python
  print(sum(range(5)))  # 10 (0+1+2+3+4)
  ```

### `min()`/`max()`
- 作用：找出可迭代对象的最小/最大值
- 示例：
  ```python
  print(min([3, 1, 4]))  # 1
  print(max('abc', key=lambda x: ord(x)))  # 'c'
  ```

### `all()`/`any()`
- 作用：检查可迭代对象中所有/任意元素为真
- 示例：
  ```python
  print(all([True, 1, 'a']))  # True
  print(any([False, 0, '']))  # False
  ```

## 4. 高阶迭代函数

### `filter()`
- 作用：过滤元素
- 示例：
  ```python
  evens = filter(lambda x: x % 2 == 0, range(5))
  print(list(evens))  # [0, 2, 4]
  ```

### `map()`
- 作用：对每个元素应用函数
- 示例：
  ```python
  squares = map(lambda x: x**2, range(5))
  print(list(squares))  # [0, 1, 4, 9, 16]
  ```

### `sorted()`
- 作用：返回新的排序列表（非惰性）
- 示例：
  ```python
  data = [('a', 2), ('b', 1)]
  print(sorted(data, key=lambda x: x[1]))  # [('b', 1), ('a', 2)]
  ```

## 5. 迭代器消费函数

### `list()`/`tuple()`/`set()`
- 作用：将迭代器转换为容器类型
- 示例：
  ```python
  it = iter(range(3))
  print(list(it))  # [0, 1, 2]
  ```

### `dict()`
- 特殊用法：将键值对迭代器转为字典
  ```python
  pairs = zip(['a', 'b'], [1, 2])
  print(dict(pairs))  # {'a': 1, 'b': 2}
  ```

## 6. 其他实用函数

### `functools.reduce()`
- 作用：累积计算（需导入）
- 示例：
  ```python
  from functools import reduce
  product = reduce(lambda x, y: x * y, [1, 2, 3, 4])
  print(product)  # 24 (1*2*3*4)
  ```

### `itertools.islice()`
- 作用：对迭代器切片（需导入）
- 示例：
  ```python
  import itertools
  print(list(itertools.islice(range(10), 2, 6, 2)))  # [2, 4]
  ```

## 重要特性总结

| 函数 | 返回值类型 | 惰性求值 | 适用场景 |
|------|------------|----------|----------|
| `iter()` | 迭代器 | 是 | 显式获取迭代器 |
| `next()` | 元素 | 是 | 手动控制迭代 |
| `enumerate()` | 枚举迭代器 | 是 | 需要索引的迭代 |
| `zip()` | 元组迭代器 | 是 | 并行迭代 |
| `filter()`/`map()` | 迭代器 | 是 | 函数式操作 |
| `sum()`/`min()`/`max()` | 计算结果 | 否 | 聚合计算 |
| `list()`/`tuple()` | 容器 | 否 | 强制求值 |

这些内置函数可以组合使用，创建强大的数据处理管道：
```python
# 计算前10个偶数的平方和
result = sum(x**2 for x in range(20) if x % 2 == 0)
print(result)  # 1140
```

理解这些函数的行为（特别是是否惰性求值）对于编写高效的Python代码至关重要。