### **Lambda 表达式 vs `def` 定义函数的异同**

在 Python 中，`lambda` 和 `def` 都可以用来定义函数，但它们在语法、功能和使用场景上有显著区别。以下是它们的详细对比：

---

## **1. 相同点**
| **特性**       | **Lambda**                     | **`def` 定义的函数**            |
|----------------|-------------------------------|--------------------------------|
| **本质**       | 都是函数对象                   | 都是函数对象                    |
| **可调用性**   | 可以像普通函数一样被调用        | 可以像普通函数一样被调用         |
| **支持参数**   | 可以接受任意数量的参数          | 可以接受任意数量的参数           |
| **返回值**     | 返回一个值（表达式结果）        | 通过 `return` 返回值            |

---

## **2. 不同点**
| **特性**               | **Lambda**                                | **`def` 定义的函数**                     |
|------------------------|------------------------------------------|------------------------------------------|
| **语法**              | 单行表达式，无名称（匿名）                | 多行代码块，必须命名                     |
| **函数体**            | 只能包含 **一个表达式**（不能有语句）      | 可以包含任意代码（循环、`if`、`return` 等） |
| **返回值**            | 自动返回表达式结果（无 `return` 关键字）   | 必须显式使用 `return`                     |
| **可读性**            | 适合简单逻辑，复杂时代码难维护            | 适合复杂逻辑，可读性强                    |
| **调试支持**          | 无函数名，调试困难                        | 有函数名，便于调试和日志记录              |
| **文档字符串**        | 不能添加 `"""docstring"""`                | 可以添加 `"""docstring"""` 文档说明       |
| **适用场景**          | 临时、简单的函数（如 `map`/`filter`）      | 复杂逻辑、可复用的功能                    |

---

## **3. 代码示例对比**
### **（1）定义方式**
```python
# 用 def 定义函数
def add_def(a, b):
    return a + b

# 用 lambda 定义函数
add_lambda = lambda a, b: a + b  # 通常不建议赋值给变量
```

### **（2）使用场景**
#### **① Lambda 的典型用途（临时函数）**
```python
# 配合 map() 使用
numbers = [1, 2, 3]
squared = map(lambda x: x ** 2, numbers)  # 临时计算平方

# 配合 sorted() 使用
students = [("Alice", 90), ("Bob", 85)]
students_sorted = sorted(students, key=lambda x: x[1])  # 按分数排序
```

#### **② def 的典型用途（复杂逻辑）**
```python
# 计算斐波那契数列（需多行代码）
def fibonacci(n):
    if n <= 1:
        return n
    else:
        return fibonacci(n-1) + fibonacci(n-2)

# 带文档字符串的函数
def greet(name):
    """返回欢迎消息（支持文档说明）"""
    return f"Hello, {name}!"
```

---

## **4. 何时使用 Lambda？何时使用 def？**
### **（1）优先用 Lambda 的场景**
- 函数逻辑非常简单（如一行表达式）。
- 函数是临时使用的（如作为 `map`/`filter` 的参数）。
- 需要快速定义匿名函数（如回调函数）。

### **（2）优先用 def 的场景**
- 函数逻辑复杂（含分支、循环、异常处理等）。
- 函数需要复用或多次调用。
- 需要添加文档字符串（`"""docstring"""`）或类型注解。
- 需要调试或日志记录（函数名有助于定位问题）。

---

## **5. 常见误区**
### **（1）Lambda 可以完全替代 def 吗？**
- **不能**。Lambda 仅适用于简单逻辑，无法替代多行代码的 `def` 函数。

### **（2）Lambda 的性能比 def 快吗？**
- **几乎无差异**。Python 对两者的处理效率相近，性能差异可忽略。

### **（3）为什么 PEP 8 不推荐将 Lambda 赋值给变量？**
- **可读性问题**：Lambda 本质是匿名函数，赋值给变量会混淆其设计初衷。  
  **不推荐写法**：
  ```python
  add = lambda a, b: a + b  # PEP 8 不建议
  ```
  **推荐写法**：
  ```python
  def add(a, b): return a + b  # 更清晰
  ```

---

## **6. 总结**
| **选择依据**       | **Lambda**                     | **`def`**                     |
|--------------------|--------------------------------|-------------------------------|
| **代码复杂度**     | 简单（单表达式）               | 复杂（多行逻辑）              |
| **复用性**         | 临时使用                       | 需多次调用                    |
| **可读性**         | 低（适合内联使用）             | 高（适合独立定义）            |
| **调试支持**       | 困难（匿名）                   | 方便（有函数名）              |

**核心建议**：  
- **简单、临时的逻辑** → 用 `lambda`（如 `sorted(key=lambda x: x[1])`）。  
- **复杂、可复用的逻辑** → 用 `def`（如业务核心功能）。  

正确选择二者可以让代码更简洁、可维护！ 🚀